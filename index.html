<!doctype html>
<html lang="ja">
<head>
  <meta name="google-site-verification" content="IIexcm8XbBbxEoYTEdwaul2C43b2IltXypEiB40UbRY" />
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>ACã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼æ¯”è¼ƒã‚µã‚¤ãƒˆ Good for life</title>
  <meta name="description" id="metaDesc" content="USB-Cå……é›»å™¨ã‚’å‡ºåŠ›ãƒ»PPSãƒ»GaNãƒ»æŠ˜ãƒ—ãƒ©ã‚°ãƒ»ãƒãƒ¼ãƒˆæ•°ã§çµã‚Šè¾¼ã¿ã€Amazonã¨æ¥½å¤©ã§ä¾¡æ ¼æ¯”è¼ƒã§ãã¾ã™ã€‚" />

  <style>
    :root{
      --bg:#0b0f14;
      --panel:#0f1621;
      --card:#0f1724;
      --primary:#e6edf6;
      --muted:#9fb1c5;
      --line:rgba(130,170,210,0.18);
      --accent:#2b55ff;
      --accent2:#ffb020;
      --shadow: 0 10px 30px rgba(0,0,0,0.45);
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font-family: Inter, system-ui, Arial;
      background:linear-gradient(180deg,#070a0f 0%, var(--bg) 40%, #070a0f 100%);
      color:var(--primary);
      overflow-x:hidden;
    }

    header{
      background:
        radial-gradient(1200px 360px at 20% 10%, rgba(43,220,255,0.18), transparent 55%),
        radial-gradient(900px 320px at 80% 0%, rgba(255,176,32,0.12), transparent 55%),
        linear-gradient(180deg, rgba(8,12,18,0.98), rgba(12,18,28,0.92));
      border-bottom:1px solid var(--line);
    }
    header .wrap{max-width:1200px;margin:0 auto;padding:18px 16px}
    header h1{
      letter-spacing:1.2px;
      text-transform:uppercase;
      margin:0;
    }
    #breadcrumbs{margin-top:8px;font-size:0.9rem;opacity:0.85;color:rgba(230,237,246,0.75)}
    .status{margin:10px 0 0;color:var(--muted);font-size:0.9rem}

    .container{max-width:1200px;margin:22px auto;padding:0 16px}
    .top-controls{
      display:flex;gap:10px;flex-wrap:wrap;align-items:center;
      background:var(--card);padding:12px;border-radius:12px;border:1px solid var(--line);
      box-shadow:0 6px 18px rgba(8,20,12,0.04)
    }
    .search{flex:1;min-width:220px}

    input[type=search]{
      width:100%;
      padding:10px;
      border-radius:8px;
      border:1px solid var(--line);
      background:rgba(255,255,255,0.06);
      color:var(--primary);
      outline:none;
    }

    /* â˜…ãƒ€ãƒ¼ã‚¯ãƒ†ãƒ¼ãƒã«çµ±ä¸€ï¼ˆç™½ã™ãå•é¡Œã®ä¿®æ­£ï¼‰ */
    .select, .btn{
      padding:10px 12px;
      border-radius:8px;
      border:1px solid var(--line);
      background:rgba(255,255,255,0.06);
      color:var(--primary);
      outline:none;
    }
    .select option{color:#111} /* OSã«ã‚ˆã£ã¦ã¯å¿…è¦ */

    .chk{
      background:rgba(43,220,255,0.06);
      border:1px solid rgba(43,220,255,0.16);
      color:var(--primary);
      padding:8px 10px;
      border-radius:10px;
      display:inline-flex;
      gap:6px;
      align-items:center;
      user-select:none;
    }
    .chk input[type="checkbox"]{
      width:15px;height:15px;
      accent-color: var(--accent);
    }

    .layout{
      display:grid;
      grid-template-columns:320px 1fr;
      gap:18px;margin-top:16px;align-items:start;
    }
    @media (max-width:980px){ .layout{grid-template-columns:1fr} }

    .sidebar{
      background:var(--card);padding:14px;border-radius:12px;border:1px solid var(--line);
      box-shadow:0 6px 18px rgba(8,20,12,0.04)
    }
    .sidebar h3{margin:0 0 10px}
    .small{font-size:0.85rem;color:var(--muted);line-height:1.5}

    .category-list button{
      display:block;width:100%;
      text-align:left;padding:10px 12px;border-radius:10px;
      border:1px solid rgba(255,255,255,0.08);
      background:rgba(255,255,255,0.04);
      cursor:pointer;
      color:rgba(255,255,255,0.92);
      font-weight:600;
    }
    .category-list button:hover{background:rgba(255,255,255,0.08)}
    #categories button.active{
      background: rgba(255,255,255,0.12);
      border: 1px solid rgba(255,255,255,0.25);
    }

    .pill-area{display:flex;flex-wrap:wrap;gap:6px}
    .pill{
      padding:5px 10px;border-radius:999px;border:1px solid rgba(212,175,55,0.35);
      background:rgba(212,175,55,0.12);color:var(--primary);cursor:pointer;font-size:0.85rem;
      user-select:none
    }
    .pill:hover{filter:brightness(0.98)}
    .pill.active{background:rgba(212,175,55,0.22);border-color:rgba(212,175,55,0.65);font-weight:800}

    .ranking{display:flex;flex-direction:column;gap:10px}
    .rank-item{display:flex;gap:12px;align-items:center}
    .rank-item img{width:64px;height:48px;object-fit:contain;border-radius:8px;background:#fff;border:1px solid var(--line)}
    .rank-item .num{width:34px;font-weight:900;color:var(--primary)}
    .rank-item .name{font-weight:900;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
    .rank-item .sub{color:var(--muted);font-size:0.85rem;margin-top:2px}

    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(230px,1fr));gap:16px}
    .card{
      background:var(--card);border-radius:12px;overflow:hidden;border:1px solid var(--line);
      box-shadow:0 6px 18px rgba(8,20,12,0.06);display:flex;flex-direction:column
    }
    .card img{
      width:100%;height:210px;object-fit:contain;background:#fff;border-bottom:1px solid var(--line)
    }
    .card-body{padding:12px;display:flex;flex-direction:column;gap:8px;flex:1}
    .title{font-weight:900;margin:0}
    .meta{display:flex;gap:8px;align-items:center;font-size:0.9rem;color:var(--muted)}
    .price{color:var(--primary);font-weight:900}
    .specline{
      font-size:0.9rem;
      color:rgba(255,255,255,0.92);
      background:rgba(255,255,255,0.06);
      padding:8px;border-radius:10px
    }
    .notes{font-size:0.92rem;color:rgba(255,255,255,0.85);line-height:1.45}
    .buy-row{display:flex;gap:8px;margin-top:auto}
    .buy{
      flex:1;padding:9px 10px;border-radius:10px;text-align:center;text-decoration:none;
      font-weight:900;display:inline-flex;justify-content:center;align-items:center
    }
    .buy.amazon{background:#ff9900;color:white}
    .buy.rakuten{background:#e60012;color:white}
    .buy:active{transform:translateY(1px)}
    footer{text-align:center;color:var(--muted);margin:28px 0;line-height:1.6}

    /* ----------------- ğŸ›ˆ ãƒ„ãƒ¼ãƒ«ãƒãƒƒãƒ—ï¼ˆdata-tipæ–¹å¼ï¼‰ ----------------- */
    .info{
      position: relative;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 12px;
      height: 12px;
      border-radius: 999px;
      border: 1px solid rgba(0, 0, 0, 0.35);
      background:rgba(255, 255, 255, 0.85);
      color: var(--accent);
      font-size: 9px;
      font-weight: 900;
      line-height: 1;
      cursor: help;
      user-select: none;
      margin-left: 6px;
    }
    .info::after{
      content: attr(data-tip);
      position: absolute;
      left: 50%;
      bottom: 140%;
      transform: translateX(-50%);
      width: min(280px, 72vw);
      padding: 10px 12px;
      border-radius: 10px;
      background: rgba(20,20,20,0.95);
      color: #fff;
      font-size: 12px;
      line-height: 1.5;
      text-align: left;
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transition: opacity .15s ease, visibility .15s ease;
      z-index: 9999;
    }
    .info::before{
      content: "";
      position: absolute;
      left: 50%;
      bottom: 128%;
      transform: translateX(-50%);
      border: 6px solid transparent;
      border-top-color: rgba(20,20,20,0.95);
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transition: opacity .15s ease, visibility .15s ease;
      z-index: 9999;
    }
    .info:hover::after,
    .info:hover::before{
      opacity: 1;
      visibility: visible;
    }
    .info:hover{
      background:rgba(0, 0, 0, 0.18);
      border-color:rgba(87, 231, 20, 0.934);
    }

    /* ===== Mobile fix ===== */
    @media (max-width: 600px){
      *{ max-width:100%; }
      input, select, textarea{
        max-width:100%;
        width:100%;
        box-sizing:border-box;
      }
    }
    @media (max-width: 600px){
  html, body{
    width: 100%;
    overflow-x: hidden;
  }

  /* å…¨ä½“ã®æ¨ªå¹…ã‚’ã‚¹ãƒãƒ›å¹…100%ã« */
  .container, main, header, section{
    width: 100% !important;
    max-width: 100% !important;
    margin-left: 0 !important;
    margin-right: 0 !important;
  }

  /* ä½™ç™½ã‚’ã‚¹ãƒãƒ›å‘ã‘ã«èª¿æ•´ï¼ˆå¥½ã¿ã§ 10ã€œ14pxï¼‰ */
  .container{
    padding-left: 12px !important;
    padding-right: 12px !important;
  }

  /* grid/flexãŒåŸå› ã§ä½™ã‚‹ã‚±ãƒ¼ã‚¹ã®ä¿é™º */
  .grid, .row, .filters-grid, .controls-grid{
    grid-template-columns: 1fr !important;
  }

  /* flexå­è¦ç´ ãŒã¯ã¿å‡ºã—ã¦æ¨ªã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«â†’ä½™ç™½ã£ã½ãè¦‹ãˆã‚‹ã®é˜²æ­¢ */
  *{
    min-width: 0;
  }
}


    /* ===== TOP3ã ã‘è¡¨ç¤ºï¼ˆç¢ºå®šãƒ»æœ€å¼·ç‰ˆï¼‰===== */
    #ranking > .rank-item:nth-of-type(n+4){
      display: none !important;
    }

    /* ===== å•†å“ã‚«ãƒ¼ãƒ‰å†…ã®ã€ŒAmazonã§ä¾¡æ ¼ã‚’è¦‹ã‚‹ã€ã‚’ä¸‹ã«æƒãˆã‚‹ ===== */
    article.card .buy-row{ margin-top:auto; }

    /* ===== ã‚«ãƒ†ã‚´ãƒªã‚’ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã«ï¼ˆ2åˆ—ãƒ»é«˜ã•å‰Šæ¸›ï¼‰ ===== */
    #categories.category-list{
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 8px;
      padding: 12px;
    }
    #categories.category-list button{
      padding: 10px 10px;
      font-size: 14px;
      line-height: 1.1;
      border-radius: 10px;
    }
    @media (max-width: 480px){
      #categories.category-list{
        grid-template-columns: 1fr;
      }
    }

    /* ===== ã‚µã‚¤ãƒˆã‚¿ã‚¤ãƒˆãƒ«å¼·åŒ– ===== */
    .site-title{
      font-size: clamp(28px, 4vw, 42px);
      font-weight: 800;
      letter-spacing: 0.04em;
    }
    .site-subtitle{
      margin-top: 6px;
      font-size: 14px;
      letter-spacing: 0.12em;
      color: rgba(255,255,255,0.75);
    }

    /* ===== TOP10ï¼ˆ#rankingï¼‰ã‚’æ¨ªä¸¦ã³ã«å›ºå®š ===== */
    #ranking{
      display: grid !important;
      gap: 12px !important;
    }
    #ranking .rank-item{
      display: grid !important;
      grid-template-columns: 44px 84px 1fr !important;
      gap: 12px !important;
      align-items: center !important;
      padding: 12px !important;
      border-radius: 16px !important;
      background: rgba(255,255,255,0.04);
      border: 1px solid rgba(255,255,255,0.08);
    }
    #ranking .rank-item img{
      width: 84px !important;
      height: 84px !important;
      object-fit: cover;
      border-radius: 16px;
    }
    @media (max-width: 420px){
      #ranking .rank-item{
        grid-template-columns: 40px 64px 1fr !important;
      }
      #ranking .rank-item img{
        width: 64px !important;
        height: 64px !important;
      }
    }
    @media (max-width: 600px){
     .tag-title,
     #tagArea{
    display: none !important;
  }
}
  /* ã‚«ãƒ†ã‚´ãƒªãƒœã‚¿ãƒ³ä¸€è¦§æœ¬ä½“ */
  #categories{
    display: none !important;
  }

@media (max-width: 600px){
  /* ã‚µã‚¤ãƒ‰ãƒãƒ¼å†…ã®ã€Œã‚«ãƒ†ã‚´ãƒªã€è¦‹å‡ºã—ã‚’æ¶ˆã™ */
  aside.sidebar h3{
    display: none !important;
  }
}
@media (max-width: 600px){
  /* å•†å“ä¸€è¦§ã‚’2åˆ—ã« */
  #grid.grid{
    display: grid !important;
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    gap: 10px !important;
  }

  /* ã‚«ãƒ¼ãƒ‰å†…ã®ä½™ç™½ã‚’å°‘ã—è©°ã‚ã‚‹ï¼ˆ2åˆ—å‘ã‘ï¼‰ */
  article.card{
    border-radius: 14px;
  }

  /* ç”»åƒã®é«˜ã•ãŒãƒ‡ã‚«ã™ãã‚‹ã¨2åˆ—ãŒå´©ã‚Œã‚‹ã®ã§èª¿æ•´ */
  .card img{
    height: 140px !important;   /* å¥½ã¿ã§ 120ã€œ160 */
    object-fit: contain;
  }

  /* ãƒœã‚¿ãƒ³ã‚’å°‘ã—è–„ãï¼ˆç¸¦ãŒé•·ããªã‚Šã™ãã‚‹ã®é˜²æ­¢ï¼‰ */
  .card .btn,
  .card a.btn,
  .card button.btn{
    padding: 10px 10px !important;
    font-size: 14px !important;
  }
}
@media (max-width: 600px){
  /* å•†å“åã‚’2è¡Œã¾ã§ã«ã—ã¦é«˜ã•ã‚’æƒãˆã‚‹ */
  .card h4, .card .title{
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
@media (max-width: 600px){

  /* è¿·ã£ãŸã‚‰ã“ã®3ã¤ å…¨ä½“ã‚’ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã« */
  #ranking{
    padding: 10px !important;
    margin-bottom: 12px !important;
  }

  /* å„ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚«ãƒ¼ãƒ‰ */
  #ranking .card{
    padding: 8px !important;
    gap: 8px !important;
  }

  /* ãƒ©ãƒ³ã‚­ãƒ³ã‚°ç”»åƒã‚’å°‘ã—å°ã•ã */
  #ranking img{
    width: 64px !important;
    height: 64px !important;
    object-fit: contain;
  }

  /* ã‚¿ã‚¤ãƒˆãƒ«æ–‡å­—ã‚’è©°ã‚ã‚‹ */
  #ranking h4{
    font-size: 14px !important;
    line-height: 1.3 !important;
  }

  /* ã‚¹ã‚³ã‚¢è¡Œã‚’å°‘ã—å°ã•ã */
  #ranking .score{
    font-size: 12px !important;
  }
}
@media (max-width: 600px){

  /* ãƒã‚§ãƒƒã‚¯ç¾¤ï¼ˆPPS/PSE/GaN/æŠ˜ã‚ŠãŸãŸã¿/PD/æ—¥æœ¬è£½ï¼‰ã‚’3è¡Œã§æ­¢ã‚ã‚‹ */
  .top-controls .checks{
    display: flex;
    flex-wrap: wrap;
    gap: 8px;

    max-height: 110px;   /* 3è¡Œã¶ã‚“ï¼ˆåˆã‚ãªã‘ã‚Œã° 96ã€œ120 ã§èª¿æ•´ï¼‰ */
    overflow: hidden;
  }

  /* ãƒã‚§ãƒƒã‚¯ï¼ˆãƒ”ãƒ«ï¼‰ã‚’å°‘ã—ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆã«ã—ã¦3è¡Œã«åã‚ã‚„ã™ãã™ã‚‹ */
  .top-controls .checks label,
  .top-controls .checks .check,
  .top-controls .checks .pill,
  .top-controls .checks button{
    font-size: 12px !important;
    padding: 6px 10px !important;
    border-radius: 999px;
  }
}
@media (max-width: 600px){
  .top-controls .checks{
    display: grid;
    grid-template-columns: 1fr 1fr; /* 2åˆ— */
    gap: 8px;

    max-height: 140px; /* 2åˆ—Ã—3è¡Œ */
    overflow: hidden;
  }

  .top-controls .checks .chk{
    font-size: 12px;
    padding: 6px 8px;
  }
}
@media (max-width: 600px){

  /* top-controls è‡ªä½“ã‚’ç¸¦ç©ã¿ã«å›ºå®šï¼ˆæ—¢å­˜flexã‚’ç„¡åŠ¹åŒ–ï¼‰ */
  .top-controls{
    display: block !important;
  }

  /* ãƒã‚§ãƒƒã‚¯ç¾¤ï¼š2åˆ—Ã—3è¡Œã§å›ºå®š */
  .top-controls .checks{
    display: grid !important;
    grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    gap: 8px !important;

    max-height: 160px !important;  /* 2åˆ—Ã—3è¡Œ */
    overflow: hidden !important;
  }

  /* label ãŒæ¨ªã„ã£ã±ã„ã‚’å–ã£ã¦1åˆ—ã«ãªã‚‹ã®ã‚’é˜²ã */
  .top-controls .checks > .chk{
    display: flex !important;
    align-items: center !important;
    width: auto !important;
    margin: 0 !important;

    font-size: 12px !important;
    padding: 6px 8px !important;
  }

  /* ã‚‚ã— .chk ã« grid-column: 1 / -1 ãŒå…¥ã£ã¦ãŸã‚‰æ½°ã™ */
  .top-controls .checks > .chk{
    grid-column: auto !important;
  }
}
@media (max-width: 600px){

  /* å¤‰ãªåŒºåˆ‡ã‚Šç·šï¼ˆhrã‚„ãƒœãƒ¼ãƒ€ãƒ¼ï¼‰ã‚’ã‚¹ãƒãƒ›ã§æ¶ˆã™ */
  hr{
    display: none !important;
  }

  /* ã‚µã‚¤ãƒ‰ãƒãƒ¼å†…ã®ç·šï¼ˆ2é‡ç·šã«ãªã£ã¦ã‚‹ã‚„ã¤ï¼‰ã‚’ã¾ã¨ã‚ã¦æ¶ˆã™ */
  aside.sidebar hr,
  aside.sidebar .divider,
  aside.sidebar .rule{
    display: none !important;
    border: 0 !important;
  }
}



  </style>

  <!-- âœ… æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ï¼ˆWebSiteï¼‰: JSONã ã‘ï¼ˆJSã¯çµ¶å¯¾æ··ãœãªã„ï¼‰ -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": "ACã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼æ¯”è¼ƒã‚µã‚¤ãƒˆ Good for life",
    "url": "https://example.com",
    "potentialAction": {
      "@type": "SearchAction",
      "target": "https://example.com/?q={search_term_string}",
      "query-input": "required name=search_term_string"
    }
  }
  </script>

  <script id="breadcrumbLD" type="application/ld+json"></script>
</head>

<body>
<header>
  <div class="wrap">
    <h1 id="mainTitle" class="site-title">ACã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼æ¯”è¼ƒã‚µã‚¤ãƒˆ Good for life</h1>
    <div id="breadcrumbs"></div>
    <p class="site-subtitle"></p>
    <div id="status" class="status"></div>
  </div>
</header>

<main class="container">
  <div class="top-controls">
    <input id="search" class="search" type="search" placeholder="æ¤œç´¢ï¼ˆä¾‹ï¼šAnker 65W / PPS / 3ãƒãƒ¼ãƒˆï¼‰" />

    <select id="sort" class="select">
      <option value="recommend_desc">ãŠã™ã™ã‚é †</option>
      <option value="price_asc">ä¾¡æ ¼ï¼šå®‰ã„é †</option>
      <option value="price_desc">ä¾¡æ ¼ï¼šé«˜ã„é †</option>
      <option value="discount_desc">å‰²å¼•ç‡ï¼šé«˜ã„é †</option>
      <option value="w_desc">æœ€å¤§Wï¼šé«˜ã„é †</option>
      <option value="weight_asc">é‡é‡ï¼šè»½ã„é †</option>
    </select>

    <select id="categorySel" class="select">
      <option value="all">ã‚«ãƒ†ã‚´ãƒªï¼šã™ã¹ã¦</option>
      <option value="ã‚¹ãƒãƒ›å‘ã‘ï¼ˆ20ã€œ45Wï¼‰">ã‚¹ãƒãƒ›å‘ã‘ï¼ˆ20ã€œ45Wï¼‰</option>
      <option value="PC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå‘ã‘ï¼ˆ45ã€œ100Wï¼‰">PC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå‘ã‘ï¼ˆ45ã€œ100Wï¼‰</option>
      <option value="100Wä»¥ä¸Š">100Wä»¥ä¸Š</option>
      <option value="2å°ä»¥ä¸ŠåŒæ™‚å……é›»">2å°ä»¥ä¸ŠåŒæ™‚å……é›»</option>
      <option value="å°å‹ï¼ˆGaNï¼‰">å°å‹ï¼ˆGaNï¼‰</option>
      <option value="æ€¥é€Ÿå……é›»ï¼ˆPPSï¼‰">æ€¥é€Ÿå……é›»ï¼ˆPPSï¼‰</option>
      <option value="æŠ˜ã‚ŠãŸãŸã¿ãƒ—ãƒ©ã‚°">æŠ˜ã‚ŠãŸãŸã¿ãƒ—ãƒ©ã‚°</option>
      <option value="PDå¯¾å¿œ">PDå¯¾å¿œ</option>
      <option value="PSEæŠ€è¡“åŸºæº–é©åˆ">PSEæŠ€è¡“åŸºæº–é©åˆ</option>
    </select>

    <select id="minW" class="select">
      <option value="0">å‡ºåŠ›: ã™ã¹ã¦</option>
      <option value="20-45">20â€“45Wï¼ˆã‚¹ãƒãƒ›å‘ã‘ï¼‰</option>
      <option value="45-100">45â€“100Wï¼ˆPC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå‘ã‘ï¼‰</option>
      <option value="100+">100Wä»¥ä¸Šï¼ˆé«˜å‡ºåŠ›ï¼‰</option>
    </select>

    <select id="minC" class="select">
      <option value="0">USB-Cãƒãƒ¼ãƒˆ: æŒ‡å®šãªã—</option>
      <option value="1">1+</option>
      <option value="2">2+</option>
      <option value="3">3+</option>
    </select>
  <div class="checks">
    <label class="chk">
      <input type="checkbox" id="ppsOnly">
      æ€¥é€Ÿå……é›»ï¼ˆPPSï¼‰
      <span class="info" data-tip="Androidã®ã€Œè¶…æ€¥é€Ÿå……é›»ã€ã§å¿…è¦ã«ãªã‚‹ã“ã¨ãŒå¤šã„è¦æ ¼ã€‚å¯¾å¿œã—ã¦ã„ãªã„ã¨æœ€å¤§é€Ÿåº¦ãŒå‡ºãªã„å ´åˆãŒã‚ã‚Šã¾ã™ã€‚">ï¼</span>
    </label>

    <label class="chk">
      <input type="checkbox" id="pseOnly">
      PSEæŠ€è¡“åŸºæº–é©åˆ
      <span class="info" data-tip="æ—¥æœ¬ã®é›»æ°—ç”¨å“å®‰å…¨æ³•ã«åŸºã¥ãã€åŸºæº–ã‚’æº€ãŸã—ãŸé›»åŒ–è£½å“ã«è¡¨ç¤ºã•ã‚Œã‚‹å®‰å…¨ãƒãƒ¼ã‚¯ã€‚">ï¼</span>
    </label>

    <label class="chk">
      <input type="checkbox" id="ganOnly">
      å°å‹ãƒ»ç™ºç†±å°‘ï¼ˆGaNï¼‰
      <span class="info" data-tip="GaNï¼ˆçª’åŒ–ã‚¬ãƒªã‚¦ãƒ ï¼‰æ¡ç”¨ã ã¨ã€åŒã˜å‡ºåŠ›ã§ã‚‚å°å‹ã«ãªã‚Šã‚„ã™ãã€ç™ºç†±ãŒæŠ‘ãˆã‚‰ã‚Œã‚„ã™ã„å‚¾å‘ãŒã‚ã‚Šã¾ã™ã€‚">ï¼</span>
    </label>

    <label class="chk">
      <input type="checkbox" id="foldOnly">
      æŠ˜ã‚ŠãŸãŸã¿ãƒ—ãƒ©ã‚°
      <span class="info" data-tip="ãƒ—ãƒ©ã‚°ãŒæŠ˜ã‚ŠãŸãŸã‚ã‚‹ã‚¿ã‚¤ãƒ—ã€‚æŒã¡é‹ã³ã«ä¾¿åˆ©ã§ã™ã€‚">ï¼</span>
    </label>

    <label class="chk">
      <input type="checkbox" id="pdOnly" />
      PDå¯¾å¿œ
      <span class="info" data-tip="USB Power Deliveryå¯¾å¿œã€‚iPhone/iPad/ãƒãƒ¼ãƒˆPCãªã©å¹…åºƒãé«˜é€Ÿå……é›»ã—ã‚„ã™ã„è¦æ ¼ã§ã™ã€‚">ï¼</span>
    </label>
    <label class="chk"><input type="checkbox" id="jpOnly" /> æ—¥æœ¬è£½ã®ã¿</label>
  </div>
  </div>

  <div class="layout">
    <aside class="sidebar">
      <h3>ãŠã™ã™ã‚ï¼ˆè¿·ã£ãŸã‚‰ã“ã®3ã¤ï¼‰</h3>
      <div id="ranking" class="ranking"></div>

      <hr style="margin:14px 0;border:none;border-top:1px solid var(--line)">

      <h3>ã‚«ãƒ†ã‚´ãƒª</h3>
      <div id="categories" class="category-list"></div>

      <hr style="margin:14px 0;border:none;border-top:1px solid var(--line)">

      <h3 class="tag-title">ã‚¿ã‚°</h3>
      <div id="tagArea" class="pill-area"></div>
      <hr style="margin:14px 0;border:none;border-top:1px solid var(--line)">

      <div class="small"></div>
    </aside>

    <section id="products">
      <div id="grid" class="grid"></div>
    </section>
  </div>
</main>

<footer>
  <small>
    ã‚¹ãƒ—ãƒ¬ãƒƒãƒ‰ã‚·ãƒ¼ãƒˆã¯ã€Œãƒ•ã‚¡ã‚¤ãƒ« â†’ å…±æœ‰ â†’ ã‚¦ã‚§ãƒ–ã«å…¬é–‹ï¼ˆCSVï¼‰ã€ã§å…¬é–‹ã—ã¦ãã ã•ã„ã€‚<br>
    Amazon / æ¥½å¤©ãƒªãƒ³ã‚¯ã¯ãã‚Œãã‚Œã®åˆ—ã«å…¥ã‚Œã‚‹ã¨ãƒœã‚¿ãƒ³ãŒå‡ºã¾ã™ï¼ˆnofollowä»˜ä¸æ¸ˆã¿ï¼‰ã€‚
  </small>
</footer>

<script>
  // â˜…ã‚ãªãŸã®CSVå…¬é–‹URL
  const DATA_URL = `https://docs.google.com/spreadsheets/d/e/2PACX-1vSx4J4JbzBz1OAPZFWEPz7qI010bBmNoZ9xTdBWFfJBlyxng-2GU56n2wGSss8kpilPNe44TzTetQxS/pub?gid=0&single=true&output=csv`;

  // ---------- helpers ----------
  const FALLBACK_IMG = 'data:image/svg+xml;utf8,' + encodeURIComponent(
    `<svg xmlns="http://www.w3.org/2000/svg" width="800" height="800">
      <rect width="100%" height="100%" fill="#e9eef0"/>
      <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" fill="#999" font-size="24">No Image</text>
    </svg>`
  );

  function toNum(v, fallback=0){
    const n = Number(String(v ?? '').replace(/[^0-9.]/g,''));
    return Number.isFinite(n) ? n : fallback;
  }
  function to01(v){ return String(v ?? '').trim() === '1' ? 1 : 0; }

  // robust CSV parser (quotes supported)
  function parseCSV(csv){
    const lines = csv.trim().split(/\r?\n/);
    const out = [];
    for(const line of lines){
      const cols = [];
      let cur = '', inQ = false;
      for(let i=0;i<line.length;i++){
        const ch = line[i];
        if(ch === '"'){
          inQ = !inQ;
        }else if(ch === ',' && !inQ){
          cols.push(cur); cur = '';
        }else{
          cur += ch;
        }
      }
      cols.push(cur);
      out.push(cols.map(c => c.trim().replace(/^"|"$/g,'')));
    }
    return out;
  }

  function csvToObjects(csv){
    const rows = parseCSV(csv);
    const header = (rows.shift() || []).map(h => h.trim());

    return rows.map(r=>{
      const x = {};
      header.forEach((h,i)=>{ x[h] = (r[i] ?? ''); });

      x.product_id = (x.product_id || '').trim();
      x.category = (x.category || '').trim();
      x.maker = (x.maker || '').trim();
      x.product_name = (x.product_name || '').trim();
      x.tags = (x.tags || '').trim();
      x.company_country = (x.company_country || '').trim();

      x.max_w = toNum(x.max_w);
      x.ports_c = toNum(x.ports_c);
      x.ports_a = toNum(x.ports_a);
      x.pd = to01(x.pd);
      x.pps = to01(x.pps);
      x.gan = to01(x.gan);
      x.plug_fold = to01(x.plug_fold);
      x.weight_g = toNum(x.weight_g);
      x.size_mm = (x.size_mm || '').trim();
      x.multi_output_rule = (x.multi_output_rule || '').trim();

      // ä»»æ„åˆ—ï¼špseï¼ˆç„¡ã„å ´åˆã¯0æ‰±ã„ï¼‰
      x.pse = to01(x.pse);

      x.personal_rating = toNum(x.personal_rating);
      x.review_rating = toNum(x.review_rating);
      x.popularity = toNum(x.popularity);
      x.discount_rate = toNum(x.discount_rate);
      x.price = toNum(x.price);

      x.notes = (x.notes || '').trim();
      x.amazon_link = (x.amazon_link || '').trim();
      x.rakuten_link = (x.rakuten_link || '').trim();
      x.image_url = (x.image_url || '').trim();

      if(!x.product_id){
        const base = (x.maker + '_' + x.product_name).toLowerCase()
          .replace(/[^a-z0-9]+/g,'_').replace(/^_+|_+$/g,'');
        x.product_id = base || ('item_' + Math.random().toString(36).slice(2,8));
      }
      return x;
    });
  }

  // ---------- categories ----------
  const CAT_PHONE = "ã‚¹ãƒãƒ›å‘ã‘ï¼ˆ20ã€œ45Wï¼‰";
  const CAT_PC    = "PC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå‘ã‘ï¼ˆ45ã€œ100Wï¼‰";
  const CAT_100P  = "100Wä»¥ä¸Š";
  const CAT_MULTI = "2å°ä»¥ä¸ŠåŒæ™‚å……é›»";
  const CAT_GAN   = "å°å‹ï¼ˆGaNï¼‰";
  const CAT_PPS   = "æ€¥é€Ÿå……é›»ï¼ˆPPSï¼‰";
  const CAT_FOLD  = "æŠ˜ã‚ŠãŸãŸã¿ãƒ—ãƒ©ã‚°";
  const CAT_PD    = "PDå¯¾å¿œ";
  const CAT_PSE   = "PSEæŠ€è¡“åŸºæº–é©åˆ";

  const FIXED_CATS = [CAT_PHONE, CAT_PC, CAT_100P, CAT_MULTI, CAT_GAN, CAT_PPS, CAT_FOLD, CAT_PD, CAT_PSE];

  function inferCats(it){
    const cats = new Set();

    if(it.max_w >= 100) cats.add(CAT_100P);
    else if(it.max_w >= 45) cats.add(CAT_PC);
    else if(it.max_w >= 20) cats.add(CAT_PHONE);

    if((it.ports_c + it.ports_a) >= 2 || it.ports_c >= 2) cats.add(CAT_MULTI);
    if(it.gan === 1) cats.add(CAT_GAN);
    if(it.pps === 1) cats.add(CAT_PPS);
    if(it.plug_fold === 1) cats.add(CAT_FOLD);
    if(it.pd === 1) cats.add(CAT_PD);
    if(it.pse === 1) cats.add(CAT_PSE);

    if(it.category) cats.add(it.category);

    return Array.from(cats);
  }

  // ---------- recommend scoring ----------
  function recommendScore(it){
    const pr = it.personal_rating || 0;
    const rr = it.review_rating || 0;
    const pop = it.popularity || 0;
    const disc = it.discount_rate || 0;

    let s = 0;
    s += pr * 12;
    s += rr * 6;
    s += Math.min(pop, 1000) * 0.02;
    s += Math.min(disc, 80) * 0.08;

    if(it.pps === 1) s += 0.8;
    if(it.gan === 1) s += 0.6;
    if(it.max_w >= 45) s += 0.4;
    if(it.max_w >= 100) s += 0.5;
    if(it.ports_c >= 2) s += 0.4;
    if(it.plug_fold === 1) s += 0.3;

    if(!it.amazon_link && !it.rakuten_link) s -= 2.0;
    return s;
  }

  // ---------- UI render ----------
  function escapeHtml(s){
    return String(s ?? '')
      .replaceAll('&','&amp;')
      .replaceAll('<','&lt;')
      .replaceAll('>','&gt;')
      .replaceAll('"','&quot;')
      .replaceAll("'","&#39;");
  }

  function renderGrid(items){
    const grid = document.getElementById('grid');
    grid.innerHTML = '';
    if(!items.length){
      grid.innerHTML = '<p>è©²å½“ã™ã‚‹å•†å“ãŒã‚ã‚Šã¾ã›ã‚“</p>';
      return;
    }

    items.forEach(it=>{
      const card = document.createElement('article');
      card.className = 'card';

      const img = document.createElement('img');
      img.src = it.image_url || FALLBACK_IMG;
      img.alt = it.product_name || '';
      img.loading = 'lazy';
      img.onerror = ()=>{ img.src = FALLBACK_IMG; };

      const body = document.createElement('div');
      body.className = 'card-body';

      const specParts = [];
      if(it.max_w) specParts.push(`${it.max_w}W`);
      specParts.push(`C${it.ports_c||0}/A${it.ports_a||0}`);
      if(it.pd) specParts.push('PD');
      if(it.pps) specParts.push('PPS');
      if(it.gan) specParts.push('GaN');
      if(it.plug_fold) specParts.push('æŠ˜ãƒ—ãƒ©ã‚°');
      if(it.pse) specParts.push('PSE');
      if(it.weight_g) specParts.push(`${it.weight_g}g`);
      if(it.multi_output_rule) specParts.push(it.multi_output_rule);

      const spec = specParts.join(' / ') || 'â€”';

      const score = recommendScore(it);
      const scoreText = Number.isFinite(score) ? score.toFixed(1) : '0.0';

      body.innerHTML = `
        <div class="title">${escapeHtml(it.product_name || '')}</div>
        <div class="meta">
          <div class="price">Â¥${it.price ? it.price.toLocaleString() : 'ãƒ¼'}</div>
          <div style="margin-left:auto">ãŠã™ã™ã‚åº¦ ${it.personal_rating || 0} / ã‚¹ã‚³ã‚¢ ${scoreText}</div>
        </div>
        <div class="specline">${escapeHtml(spec)}</div>
        <div class="notes">${escapeHtml(it.notes || '')}</div>
      `;

      const buyRow = document.createElement('div');
      buyRow.className = 'buy-row';

      if(it.amazon_link){
        const a = document.createElement('a');
        a.className = 'buy amazon';
        a.href = it.amazon_link;
        a.target = '_blank';
        a.rel = 'nofollow noopener noreferrer';
        a.textContent = 'Amazonã§ä¾¡æ ¼ã‚’è¦‹ã‚‹';
        buyRow.appendChild(a);
      }
      if(it.rakuten_link){
        const a = document.createElement('a');
        a.className = 'buy rakuten';
        a.href = it.rakuten_link;
        a.target = '_blank';
        a.rel = 'nofollow noopener noreferrer';
        a.textContent = 'æ¥½å¤©ã§ä¾¡æ ¼ã‚’è¦‹ã‚‹';
        buyRow.appendChild(a);
      }

      body.appendChild(buyRow);
      card.appendChild(img);
      card.appendChild(body);
      grid.appendChild(card);
    });
  }

  function renderRanking(items){
    const rank = document.getElementById('ranking');
    rank.innerHTML = '';

    const top = [...items].sort((a,b)=>recommendScore(b)-recommendScore(a)).slice(0,10);

    top.forEach((it,i)=>{
      const el = document.createElement('div');
      el.className = 'rank-item';

      // âœ… ã‚¯ãƒªãƒƒã‚¯é·ç§»ç”¨URLã‚’datasetã«åŸ‹ã‚ã‚‹ï¼ˆAmazonå„ªå…ˆ â†’ æ¥½å¤©ï¼‰
      const jump = it.amazon_link || it.rakuten_link || '';
      if (jump) el.dataset.link = jump;

      const num = document.createElement('div');
      num.className = 'num';
      num.textContent = `#${i+1}`;

      const img = document.createElement('img');
      img.src = it.image_url || FALLBACK_IMG;
      img.loading = 'lazy';
      img.onerror = ()=>{ img.src = FALLBACK_IMG; };

      const box = document.createElement('div');
      box.style.minWidth = '0';

      const name = document.createElement('div');
      name.className = 'name';
      name.textContent = it.product_name || '';

      const sub = document.createElement('div');
      sub.className = 'sub';
      const specMini = [];
      if(it.max_w) specMini.push(`${it.max_w}W`);
      if(it.pd) specMini.push('PD');
      if(it.pps) specMini.push('PPS');
      if(it.gan) specMini.push('GaN');
      if(it.plug_fold) specMini.push('æŠ˜');
      if(it.pse) specMini.push('PSE');
      sub.textContent = `${specMini.join(' / ') || 'â€”'}  | ã‚¹ã‚³ã‚¢ ${recommendScore(it).toFixed(1)}`;

      box.appendChild(name);
      box.appendChild(sub);

      el.appendChild(num);
      el.appendChild(img);
      el.appendChild(box);

      rank.appendChild(el);
    });
  }

  // ---------- tags ----------
  function generateTags(items){
    const tagSet = new Set();
    items.forEach(it=>{
      if(it.tags){
        it.tags.split(',').map(s=>s.trim()).filter(Boolean).forEach(t=>tagSet.add(t));
      }
      if(it.maker) tagSet.add(it.maker);
      if(it.max_w >= 100) tagSet.add('100W+');
      if(it.max_w >= 45 && it.max_w < 100) tagSet.add('45-100W');
      if(it.max_w >= 20 && it.max_w < 45) tagSet.add('20-45W');
      if(it.pd) tagSet.add('PD');
      if(it.pps) tagSet.add('PPS');
      if(it.gan) tagSet.add('GaN');
      if(it.plug_fold) tagSet.add('æŠ˜ãƒ—ãƒ©ã‚°');
      if(it.pse) tagSet.add('PSE');
      if(it.ports_c >= 2) tagSet.add('USB-C 2+');
    });

    const area = document.getElementById('tagArea');
    area.innerHTML = '';

    const tags = Array.from(tagSet).slice(0,30);
    tags.forEach(t=>{
      const el = document.createElement('span');
      el.className = 'pill';
      el.textContent = t;
      el.onclick = ()=>{
        document.getElementById('search').value = t;
        applyFilters();
      };
      area.appendChild(el);
    });
  }

  // ---------- breadcrumbs + SEO ----------
  function updateBreadcrumbs(cat){
    const bc = document.getElementById('breadcrumbs');
    let text = '';
    if(cat && cat !== 'all') text += ' > ' + cat;
    bc.textContent = text;

    const ld = {
      '@context': 'https://schema.org',
      '@type': 'BreadcrumbList',
      'itemListElement': [
        {'@type':'ListItem','position':1,'name':'','item':'https://example.com'}
      ]
    };
    if(cat && cat !== 'all'){
      ld.itemListElement.push({'@type':'ListItem','position':2,'name':cat,'item':'https://example.com#'+encodeURIComponent(cat)});
    }
    document.getElementById('breadcrumbLD').textContent = JSON.stringify(ld);
  }

  function updateSEO(cat){
    const titleEl = document.getElementById('mainTitle');
    const meta = document.getElementById('metaDesc');

    if(cat && cat !== 'all'){
      titleEl.textContent = `ACã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼æ¯”è¼ƒã‚µã‚¤ãƒˆ Good for life - ${cat}`;
      meta.content = `USB-Cå……é›»å™¨ã‚’ã€Œ${cat}ã€ã§çµã‚Šè¾¼ã¿ã€Amazonã¨æ¥½å¤©ã§ä¾¡æ ¼æ¯”è¼ƒã§ãã¾ã™ã€‚`;
      document.title = titleEl.textContent;
    }else{
      titleEl.textContent = 'ACã‚¢ãƒ€ãƒ—ã‚¿ãƒ¼æ¯”è¼ƒã‚µã‚¤ãƒˆ Good for life';
      meta.content = 'USB-Cå……é›»å™¨ã‚’å‡ºåŠ›ãƒ»PPSãƒ»GaNãƒ»æŠ˜ãƒ—ãƒ©ã‚°ãƒ»ãƒãƒ¼ãƒˆæ•°ã§çµã‚Šè¾¼ã¿ã€Amazonã¨æ¥½å¤©ã§ä¾¡æ ¼æ¯”è¼ƒã§ãã¾ã™ã€‚';
      document.title = titleEl.textContent;
    }
  }

  // ---------- data + filtering ----------
  let data = [];

  function matchW(w, sel){
    if(sel === "0") return true;
    if(sel === "20-45") return w >= 20 && w < 45;
    if(sel === "45-100") return w >= 45 && w < 100;
    if(sel === "100+") return w >= 100;
    return true;
  }

  function applyFilters(){
    let out = data.slice();

    const q = document.getElementById('search').value.trim().toLowerCase();
    const catSel = document.getElementById('categorySel').value;

    const jpOnly = document.getElementById('jpOnly').checked;
    const wSel = document.getElementById('minW').value || "0";
    const minC = Number(document.getElementById('minC').value || 0);

    const ppsOnly = document.getElementById('ppsOnly').checked;
    const ganOnly = document.getElementById('ganOnly').checked;
    const foldOnly = document.getElementById('foldOnly').checked;
    const pdOnly = document.getElementById('pdOnly').checked;
    const pseOnly = document.getElementById('pseOnly').checked;

    if(q){
      out = out.filter(i=>{
        const hay = `${i.product_name} ${i.maker} ${i.tags} ${i.notes}`.toLowerCase();
        return hay.includes(q);
      });
    }

    if(catSel !== 'all'){
      out = out.filter(i => (i._cats || []).includes(catSel) || i.category === catSel);
    }

    if(jpOnly){
      out = out.filter(i => (i.company_country || '') === 'æ—¥æœ¬');
    }

    out = out.filter(i => matchW((i.max_w || 0), wSel));

    if(minC){
      out = out.filter(i => (i.ports_c || 0) >= minC);
    }
    if(pdOnly){
      out = out.filter(i => (i.pd || 0) === 1);
    }
    if(ppsOnly){
      out = out.filter(i => (i.pps || 0) === 1);
    }
    if(ganOnly){
      out = out.filter(i => (i.gan || 0) === 1);
    }
    if(foldOnly){
      out = out.filter(i => (i.plug_fold || 0) === 1);
    }
    if(pseOnly){
      out = out.filter(i => (i.pse || 0) === 1);
    }

    const sort = document.getElementById('sort').value;
    if(sort === 'price_asc'){
      out.sort((a,b)=>(a.price||0)-(b.price||0));
    }else if(sort === 'price_desc'){
      out.sort((a,b)=>(b.price||0)-(a.price||0));
    }else if(sort === 'discount_desc'){
      out.sort((a,b)=>(b.discount_rate||0)-(a.discount_rate||0));
    }else if(sort === 'w_desc'){
      out.sort((a,b)=>(b.max_w||0)-(a.max_w||0));
    }else if(sort === 'weight_asc'){
      out.sort((a,b)=>((a.weight_g||999999)-(b.weight_g||999999)));
    }else{
      out.sort((a,b)=>recommendScore(b)-recommendScore(a));
    }

    renderGrid(out);
    renderRanking(out.length ? out : data);
    updateSEO(catSel);
    updateBreadcrumbs(catSel);

    document.getElementById('status').textContent =
      `è¡¨ç¤ºä¸­: ${out.length} ä»¶ / å…¨ ${data.length} ä»¶`;
  }

  function on(id, ev, fn){
    const el = document.getElementById(id);
    if(!el){
      console.warn("è¦ç´ ãŒè¦‹ã¤ã‹ã‚‰ãªã„:", id);
      return;
    }
    el.addEventListener(ev, fn);
  }

  // ===============================
  // âœ… ã‚«ãƒ†ã‚´ãƒªãƒœã‚¿ãƒ³ â†’ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é€£å‹•ï¼ˆã‚ãªãŸã®IDå¯¾å¿œç‰ˆï¼‰
  // ===============================
  function resetFilterUI(){
    ['ppsOnly','pseOnly','ganOnly','foldOnly','pdOnly','jpOnly'].forEach(id=>{
      const el = document.getElementById(id);
      if(el) el.checked = false;
    });
    const minW = document.getElementById('minW');
    if(minW) minW.value = "0";
    const minC = document.getElementById('minC');
    if(minC) minC.value = "0";
  }

  function applyCategoryToFilters(catText){
    resetFilterUI();

    if(catText.includes('ã‚¹ãƒãƒ›å‘ã‘')){
      document.getElementById('minW').value = "20-45";
    }
    if(catText.includes('PC/ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆå‘ã‘')){
      document.getElementById('minW').value = "45-100";
    }
    if(catText.includes('100Wä»¥ä¸Š')){
      document.getElementById('minW').value = "100+";
    }
    if(catText.includes('2å°ä»¥ä¸ŠåŒæ™‚å……é›»')){
      document.getElementById('minC').value = "2";
    }
    if(catText.includes('å°å‹') || catText.includes('GaN')){
      document.getElementById('ganOnly').checked = true;
    }
    if(catText.includes('æ€¥é€Ÿå……é›»') || catText.includes('PPS')){
      document.getElementById('ppsOnly').checked = true;
    }
    if(catText.includes('æŠ˜ã‚ŠãŸãŸã¿ãƒ—ãƒ©ã‚°')){
      document.getElementById('foldOnly').checked = true;
    }
    if(catText.includes('PDå¯¾å¿œ')){
      document.getElementById('pdOnly').checked = true;
    }
    if(catText.includes('PSE')){
      document.getElementById('pseOnly').checked = true;
    }

    applyFilters();
  }

  function buildCategoryButtons(){
    const catDiv = document.getElementById('categories');
    catDiv.innerHTML = '';

    const makeBtn = (label, value) => {
      const b = document.createElement('button');
      b.textContent = label;

      b.onclick = ()=>{
        const sel = document.getElementById('categorySel');
        if(sel) sel.value = value;

        // activeè¡¨ç¤º
        catDiv.querySelectorAll('button').forEach(x=>x.classList.remove('active'));
        b.classList.add('active');

        if(value === 'all'){
          resetFilterUI();
          applyFilters();
        }else{
          applyCategoryToFilters(label);
        }
      };

      catDiv.appendChild(b);
    };

    makeBtn('ã™ã¹ã¦', 'all');
    FIXED_CATS.forEach(c => makeBtn(c, c));
  }

  async function init(){
    try{
      const res = await fetch(DATA_URL, {cache:'no-cache'});
      if(!res.ok) throw new Error('CSVå–å¾—å¤±æ•—: ' + res.status);

      const csv = await res.text();
      console.log("CSVå…ˆé ­200æ–‡å­—:", csv.slice(0,200));

      const raw = csvToObjects(csv);
      data = raw.map(it=>{
        it._cats = inferCats(it);
        return it;
      });

      buildCategoryButtons();
      generateTags(data);

      updateSEO('all');
      updateBreadcrumbs('all');

      on('search','input',applyFilters);
      on('sort','change',applyFilters);
      on('categorySel','change',applyFilters);
      on('jpOnly','change',applyFilters);
      on('minW','change',applyFilters);
      on('minC','change',applyFilters);
      on('ppsOnly','change',applyFilters);
      on('ganOnly','change',applyFilters);
      on('foldOnly','change',applyFilters);
      on('pdOnly','change',applyFilters);
      on('pseOnly','change',applyFilters);

      applyFilters();

    }catch(e){
      console.error(e);
      document.getElementById('grid').innerHTML = '<p></p>';
      document.getElementById('status').textContent = 'ã‚¨ãƒ©ãƒ¼: ' + String(e.message || e);
    }
  }

  init();

  // ===============================
  // âœ… TOPãƒ©ãƒ³ã‚­ãƒ³ã‚°ï¼šã‚¯ãƒªãƒƒã‚¯ã§Amazon/æ¥½å¤©ã¸ï¼ˆå†æç”»ã—ã¦ã‚‚ç¢ºå®Ÿï¼‰
  // ===============================
  document.getElementById('ranking').addEventListener('click', (e) => {
    const item = e.target.closest('.rank-item');
    if(!item) return;
    const url = item.dataset.link;
    if(!url) return;
    window.open(url, '_blank', 'noopener');
  });
</script>
</body>
</html>
